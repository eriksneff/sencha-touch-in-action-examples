<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>
    <link rel="stylesheet" href="../../touch/resources/css/sencha-touch.css" type="text/css">
    <script type="text/javascript" src="../../touch/sencha-touch-all-debug.js"></script>
    <script type='text/javascript' src='http://maps.google.com/maps/api/js?sensor=true'></script>

    <script type="text/javascript">
        /**
         * Sample code to show a simple example
         * of the Map Component and a Google
         * Marker and InfoWindow
         */

        Ext.application({
            launch : function() {

                var onMapRender = function(STmap, map) {
                    var maps   = google.maps,
                        geo    = STmap.getGeo(),
                        lat    = geo.getLatitude(),
                        lng    = geo.getLongitude(),
                        coords = new maps.LatLng(lat, lng),
                        marker = new maps.Marker({
                            position : coords,
                            map      : map
                        }),
                        infowindow = new maps.InfoWindow({
                            content : 'This is the current location'
                        });


                    debugger;

                    maps.event.addListener(marker, 'click', function() {
                        infowindow.open(map, marker);
                    });
                };


                new Ext.Map({
                    fullscreen         : true,
                    autoUpdate         : false,
                    useCurrentLocation : true,
                    listeners          : {
                        maprender : onMapRender,
                        single    : true
                    }
                });

            }
        });

    </script>
</head>
<body></body>
</html>